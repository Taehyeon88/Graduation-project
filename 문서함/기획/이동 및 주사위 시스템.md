# 이동 및 주사위 시스템

---

최신 업데이트 : 2026.01.28  
버전 : 0.0.1
---

## 1\. 개요

게임의 핵심인 주사위 기반 강제 이동과 경로 차단 메커니즘을 정의한다. 플레이어는 주사위를 굴려 나온 숫자만큼 반드시 이동해야 하며, 이동한 타일은 해당 턴 동안 벽(Wall)으로 변해 되돌아갈 수 없다. 이는 단순한 이동을 ‘퍼즐’과 ‘전략’의 영역으로 확장시키는 것을 목표로 한다.

## 2\. 그리드 및 맵 구조

### 2.1 규격

* 전체 크기 : 가로 10칸 x 세로 6칸 (총 60칸)  
* 이유:   
  * 주사위의 최대값(7\~8) 이동 시, 직선 이동뿐만 아니라 우회 기동을 할 수 있는 최소한의 공간 확보  
  * 뱀 꼬리 규칙으로 인한 퇴로 차단 시, 플레이어가 빠져나갈 구멍 제공

### 2.2 타일 상태 및 종류

각 타일은 기본적인 상태(이동 가능 / 불가) 외에 오브젝트나 효과를 가질 수 있다.

A. 기본 상태  
1\. 일반 (Normal) : 아무 효과 없는 빈 땅. 이동 가능  
2\. 벽 (Wall) : 영구적인 장애물. 이동 불가  
3\. 유닛 (Unit) : 캐릭터 또는 적이 서 있는 칸. 이동 불가  
4\. 지나간 길 (Exhausted):

* 플레이어가 이번 턴에 밟고 지나간 타일  
* 이번 턴 종료시 까지 벽(Wall)으로 판정되어 재진입 불가  
* 턴 종료시 일반(Normal) 상태로 초기화

B. 오브젝트 및 특수 타일  
5\. 아이템 (Item)

* 특징 : 이동 가능. 플레이어가 해당 타일에 진입(Enter)하는 즉시 효과 발동 후 소멸(Despawn)  
* 예시 : 마나파편 (이번 턴에만 사용할 수 있는 마나 \+1 즉시 획득)  
* 재생성 : 다시 스폰되지 않음 (1회성)

6\. 위험 구역 (Danger Zone)

* 공격 예고 (Warning) : 몬스터의 다음 턴 공격 범위. 이동은 가능하나, 턴 종료 시 해당 위치에 머물면 데미지 받음  
* 장판 (Hazard) : 독웅덩이, 가시 함정 등. 타일에 닿는 순간 즉시 데미지나 디버프 적용

7\. 환경 지형:

* 물줄기 (Stream) : 흐르는 방향으로 강제 이동되거나, 이동력을 추가로 소모하는 등 물리적 영향을 주는 지형  
* 철도 (railway) : 일정 턴 마다 철도가 위치한 타일에 데미지를 주는 지형

## 3\. 주사위 시스템

### 3.1 주사위 종류

주사위는 고정된 1\~6이 아니며, 이벤트 구간에서 랜덤으로 증가하거나 감소 시킬 수 있다.

* 밸런스형 (D6) : 초기 스타트 주사위로 기본적인 숫자로 구성 되어 있음  
* 변칙형 (D4) : 사면체 주사위로 플레이어가 윈하는 숫자를 배치하여 사용하기 좋음

### 3.2 판정 로직

1. 턴 시작 시 플레이어가 소유한 주사위를 굴린다.  
2. 나온 결과값이 즉시 ‘잔여 이동력(SPD)’으로 전환된다.  
3. 예시 : \[1, 1, 1, 2, 3, 4\] 주사위에서 ‘3’이 나오면, SPD \= 3 획득

## 4\. 이동 매커니즘

### 4.1 기본 이동 규칙

* 전체 조건 : 이동 모드(Movement Mode) 상태에서만 이동 가능  
* 방식 : 상하좌우 대각선 방향 이동  
* 소모 : 1칸 이동 시 SPD 1 소모  
* 제약:  
  * 이동을 시작한 타일과 이동을 마친 타일은 즉시 ‘지나간 길(Exhausted)’ 상태가 된다.  
  * 갔던 길을 되돌아올 수 없다.

### 4.2 행동 순서

이동과 행동(카드 사용 및 물약 사용 등)의 순서는 자유롭다.

시나리오 : SPD 3 획득

1. 1칸 이동 (적 접근) \-\> 잔여 SPD 2  
2. \[카드\] 사용  
3. 2칸 이동 (안전지대로 후퇴) \-\> 잔여 SPD 0  
4. 턴 종료

### 4.3 턴 종료 및 리스크

* 조건 : 잔여 SPD \== 0 일 때만 리스크 없이 정상적으로 턴 종료 버튼 활성화  
* 리스크:  
  * 잔여 SPD를 소모하지 못할 경우 또는 이동 경로가 막혀 SPD를 모두 소진하지 못한 경우, 남은 SPD만큼 다음 턴 이동 횟수(SPD)에서 차감된다.  
  * 공식 : 다음 턴 실제 SPD \= MAX(0, 주사위 결과값 \- 이전 턴 남은 SPD)  
  * 예시 : 이동력 3을 남기고 종료 시, 다음 턴 주사위가 4가 나오면 실제 이동 가능 횟수는 1칸 (4-3)이 된다. 만약 2가 나오면 이동 불가 상태(2 \- 3 \= \-1)가 되며 0으로 처리된다.

## 5\. UI/UX 및 조작

PC 플랫폼 기준의 조작 방식

### 5.1 조작

* 이동 모드 진입:  
  * 단축키 : A 키 입력  
  * UI 상호작용 : 화면 내 이동 횟수 표시 아이콘 클릭  
  * 효과:   
    * 캐릭터 주변으로 이동 가능한 타일의 경로가 표시됨  
    * 표시된 타일 위로 필요한 SPD를 표시함  
* 좌클릭 : 해당 지점까지 이동 확정  
* 우클릭 : 이동 모드 취소  
* 이동 모드 취소:  
  * 단축키 : A 키 입력  
  * 카드 선택:  
    * 카드 클릭  
    * 단축키 : 1\~0

### 5.2 시각적 피드백

1. 경로 미리보기  
   * 이동 가능 시 : 녹색 타일로 표시  
   * 이동 불가/충돌 시 : 적색 타일로 표시  
   * 경로에 소모될 SPD 숫자를 표시 (예: \-1)  
2. 지나간 길  
   * 플레이어가 이동해온 궤적은 어둡게 처리하여 못간다는 느낌을 강조  
3. 캐릭터 HUD  
   * 캐릭터 머리 위에 현재 남은 SPD를 크게 표시  
   * 이동 모드 버튼에 하이라이트 효과 추가  
   * 패널티 알림 : 강제 종료 시 캐릭터 머리 위에 다리 부상 아이콘을 띄워 패널티 적용을 명확히 안내  
   * 효과 창에 다리 부상 아이콘 추가 (해당 턴에 리스크를 받지 않을 시 다음 턴에 제거)