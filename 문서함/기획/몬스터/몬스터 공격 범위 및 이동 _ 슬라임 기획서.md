# 몬스터 공격 범위 및 이동 : 슬라임 기획서

---

최신 업데이트 : 2026.02.02  
---

## 개요

슬라임은 프로토타입 제작 몬스터로 거리 조절을 담당하는 몬스터이다.  
매 턴 랜덤한 이동력을 부여받으며, 공격 시 자신의 최대 사거리 끝부분에 플레이어가 위치하도록 이동하려는 습성이 있다. 이는 플레이어에게 접근을 허용하지 않으면서 괴롭히는 패턴을 만든다.

## 기본 스탯 및 데이터

| 변수 명 | 타입 | 설명 | 비고 |
| :---- | :---- | :---- | :---- |
| moveRangeMin | int | 최소 이동 거리 | 최소 : 1 |
| moveRangeMax | int | 최대 이동 거리 | 최대 : 3 |
| currentMoveRange | int | 이번 턴에 이동해야 할 강제 거리 | 턴 시작 시 랜덤으로 결정 |
| attackRange | int | 공격 사거리 | 사거리 : 3 |

## AI 행동 루프

몬스터 턴이 시작되면 아래 순서대로 로직을 실행한다.

Step 1\. 초기화

1. moveRangeMin \~ moveRangeMax 사이의 정수 난수를 생성하여 currentMoveRange에 할당 한다.

Step 2\. 이동 로직  
핵심 규칙 : 이동 가능한 타일 중, 공격 사거리 끝부분으로 타격할 수있는 위치를 가장 선호한다.

1. 후보지 탐색  
   * BFS를 사용하여 시작 지점에서 이동 비용이 정확히 currentMoveRange인 타일 리스트(targetLists)를 추출한다.  
2. 최적 타일 선정 : 타일 리스트(targetLists)를 순회하며 각 타일에 점수(Score)를 매긴다.  
   * 점수 계산 로직 (우선 순위):  
     * 1순위 : 플레이어와 8방향 직선 정렬됨 \+ 거리가 정확히 attackRange와 일치  
       * 가중치 : \+200  
     * 2순위 : 플레이어와 8방향 직선 정렬됨 \+ 거리가 attackRange \- 1과 일치  
       * 가중치 : \+150  
     * 3순위 : 플레이어와 8방향 직선 정렬됨 \+ 사거리 내에 존재  
       * 가중치 : \+100  
     * 4순위 : 공격 각이 나오지 않음  
       * 가중치 :  \+(10 \- 플레이어와의 거리)  
   * 점수가 가장 높은 타일을 moveTile로 확정한다. (동점일 경우 무작위 선택)  
3. 예외 처리:  
   * currentMoveRange 만큼 갈 수 있는 곳이 없으면 currentMoveRange을 1칸 줄여 재검색  
4. 이동 실행 : moveTile로 유닛을 이동시킨다.

Step 3\. 공격 방향 결정  
이동이 완료된 후, 8방향 중 단 하나의 공격 방향을 결정한다.

1. 방향 백터 계산:  
   * 몬스터 위치와 플레이어 위치의 각도를 계산한다.  
2. 공격 모드 판정:  
   * 플레이어가 8방향 직성상에 존재함:  
     * attackDirecrtion \= 플레이어를 향한 벡터  
     * 상태 : 적중 확정  
   * 플레이어가 직선상에 없음:  
     * 플레이어의 위치와 각도 차이가 가장 적은 8방향 벡터를 attackDirecrtion으로 선택  
     * 상태 : 위협 사격

Step 4\. 공격 예고

1. attackDirecrtion 방향으로 attackRange만큼 타일들을 계산한다.  
2. 해당 타일들에 색상을 붉은 색으로 변경한다.

